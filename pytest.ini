[pytest]
testpaths =
    tests
    backend/tests
norecursedirs =
    .venv
    artifacts
    state

# Explicitly set asyncio fixture loop scope (prevents future pytest-asyncio breakage)
asyncio_default_fixture_loop_scope = function

markers =
    smoke: quick sanity checks
    contract: API/UI contract checks
    e2e_http: HTTP e2e tests against a running server
    integration: hits real running server
    asyncio: async tests
    postgres: postgres-only tests

# =============================================================================
# Filter Warnings
# =============================================================================
filterwarnings =
    error
    ignore:.*MemoryObjectReceiveStream:pytest.PytestUnraisableExceptionWarning
    ignore:.*BaseConnection.__del__:pytest.PytestUnraisableExceptionWarning
