{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "id",
    "display_name",
    "provider",
    "capabilities",
    "required_scopes",
    "allowed_auth_modes",
    "webhook_support",
    "version"
  ],
  "properties": {
    "id": {"type": "string", "pattern": "^[a-z0-9_\\-]+$"},
    "display_name": {"type": "string", "minLength": 1, "maxLength": 120},
    "provider": {"type": "string", "enum": ["slack", "google"]},
    "capabilities": {
      "type": "array",
      "items": {"type": "string", "enum": ["read", "ingest", "write"]},
      "minItems": 1,
      "uniqueItems": true
    },
    "required_scopes": {
      "type": "array",
      "items": {"type": "string", "minLength": 1},
      "minItems": 1,
      "uniqueItems": true
    },
    "allowed_auth_modes": {
      "type": "array",
      "items": {"type": "string", "enum": ["oauth2", "service_account"]},
      "minItems": 1,
      "uniqueItems": true
    },
    "webhook_support": {"type": "boolean"},
    "version": {
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-[0-9A-Za-z.-]+)?(?:\\+[0-9A-Za-z.-]+)?$"
    }
  }
}
